<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Panel Admin - CineMovies</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <style>
    body {
      background-color: #111;
      color: white;
    }
    .card {
      background-color: #e0dada;
    }
    input, textarea, select {
      background-color: #222 !important;
      color: white !important;
    }
  </style>
</head>
<body class="p-4">

  <div class="container">
    
    <h2 class="text-center mb-4">Administrativo<img src="logo.png" alt="" style="
        width: 150px; height: 170px; padding: 10px;"></h2>

    <!-- Buscar película -->
    <div class="card p-3 mb-4">
      <h5><i class="bi bi-search p-2"></i>Buscar película</h5>
      <div class="input-group">
        <input type="text" id="busqueda" class="form-control" placeholder="Ej: The Batman">
        <button class="btn btn-primary" onclick="buscarPelicula()">Buscar</button>
      </div>
    </div>

    <!-- Resultado automático -->
    <div id="resultado" class="card p-3 d-none">
      <h5>Datos encontrados:</h5>
      <div class="row">
        <div class="col-md-4">
          <img id="poster" src="" class="img-fluid rounded shadow" alt="Poster película">
        </div>
        <div class="col-md-8">
          <h4 id="titulo"></h4>
          <p id="descripcion"></p>
          <p><strong>Estreno:</strong> <span id="fecha"></span></p>

          <label for="horarios">Horarios (separados por coma)</label>
          <input type="text" id="horarios" class="form-control" placeholder="3:00 PM, 6:00 PM, 9:00 PM">

          <button class="btn btn-success mt-3" onclick="agregarACartelera()">Agregar a cartelera</button>
        </div>
      </div>
    </div>

    <!-- Cartelera temporal -->
    <div class="mt-5">
      <h4><i class="bi bi-film p-2"></i>Películas cargadas</h4>
      <ul id="listaCartelera" class="list-group text-dark"></ul>
    </div>
  </div>

 <script>
  async function buscarPelicula() {
    const busqueda = document.getElementById("busqueda").value.trim();
    if (!busqueda) return alert("Escribe el nombre de la película.");

    const apiKey = "5091fe6d71c80a140b9a82c6d745da23"; 
    const resp = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=es&query=${encodeURIComponent(busqueda)}`);
    const data = await resp.json();
    if (!data.results.length) return alert("Película no encontrada.");

    const p = data.results[0];
    document.getElementById("poster").src = p.poster_path ? `https://image.tmdb.org/t/p/w500${p.poster_path}` : "";
    document.getElementById("titulo").innerText = p.title;
    document.getElementById("descripcion").innerText = p.overview;
    document.getElementById("fecha").innerText = p.release_date;
    document.getElementById("resultado").classList.remove("d-none");
  }

  function agregarACartelera() {
    const titulo = document.getElementById("titulo").innerText;
    const horarios = document.getElementById("horarios").value;

    const li = document.createElement("li");
    li.className = "list-group-item";
    li.innerHTML = `<strong>${titulo}</strong> - Horarios: ${horarios}`;

    document.getElementById("listaCartelera").appendChild(li);
    document.getElementById("busqueda").value = "";
    document.getElementById("resultado").classList.add("d-none");
  }
</script>

</body>
</html>
